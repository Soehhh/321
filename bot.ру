import telebot
import google.generativeai as genai

# === НАСТРОЙКИ (Вставь свои данные сюда) ===
BOT_TOKEN = 'ТВОЙ_ТОКЕН_ИЗ_BOTFATHER'
GEMINI_API_KEY = 'ТВОЙ_КЛЮЧ_ИЗ_GOOGLE_AI_STUDIO'

# Настройка нейросети
genai.configure(api_key=GEMINI_API_KEY)
model = genai.GenerativeModel('gemini-1.5-flash')

# Настройка бота
bot = telebot.TeleBot(BOT_TOKEN)

# Логика ответов
@bot.message_handler(func=lambda message: True)
def handle_text(message):
    try:
        # Индикация, что бот "думает"
        bot.send_chat_action(message.chat.id, 'typing')
        
        # Запрос к нейросети
        response = model.generate_content(message.text)
        
        # Отправка ответа пользователю
        bot.reply_to(message, response.text)
        print(f"Ответил пользователю {message.from_user.first_name}")
        
    except Exception as e:
        print(f"Произошла ошибка: {e}")
        bot.reply_to(message, f"Упс, что-то пошло не так. Ошибка: {e}")

if name == "main":
    print("--- Бот запущен и готов к работе! ---")
    print("Напиши ему что-нибудь в Telegram.")
    bot.infinity_polling()
